module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t){e.exports=require("react")},function(e,t,n){e.exports=n(8)()},function(e,t){e.exports=require("xeokit-sdk/src/plugins/BCFViewpointsPlugin/BCFViewpointsPlugin")},function(e,t){e.exports=require("xeokit-sdk/src/viewer/Viewer")},function(e,t,n){(function(t){var n=200,r="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",u="[object Function]",c="[object GeneratorFunction]",a=/^\[object .+?Constructor\]$/,s="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,f=s||l||Function("return this")();function p(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function h(e,t){return!!(e?e.length:0)&&function(e,t,n){if(t!=t)return function(e,t,n,r){var o=e.length,i=n+(r?1:-1);for(;r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}(e,v,n);var r=n-1,o=e.length;for(;++r<o;)if(e[r]===t)return r;return-1}(e,t,0)>-1}function d(e,t,n){for(var r=-1,o=e?e.length:0;++r<o;)if(n(t,e[r]))return!0;return!1}function y(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function v(e){return e!=e}function b(e,t){return e.has(t)}var m,_=Array.prototype,g=Function.prototype,w=Object.prototype,O=f["__core-js_shared__"],k=(m=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",P=g.toString,j=w.hasOwnProperty,S=w.toString,T=RegExp("^"+P.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=f.Symbol,V=w.propertyIsEnumerable,C=_.splice,E=x?x.isConcatSpreadable:void 0,F=Math.max,R=U(f,"Map"),L=U(Object,"create");function A(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function I(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function q(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function B(e){var t=-1,n=e?e.length:0;for(this.__data__=new q;++t<n;)this.add(e[t])}function z(e,t){for(var n,r,o=e.length;o--;)if((n=e[o][0])===(r=t)||n!=n&&r!=r)return o;return-1}function M(e,t,r,o){var i,u=-1,c=h,a=!0,s=e.length,l=[],f=t.length;if(!s)return l;r&&(t=function(e,t){for(var n=-1,r=e?e.length:0,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(t,(i=r,function(e){return i(e)}))),o?(c=d,a=!1):t.length>=n&&(c=b,a=!1,t=new B(t));e:for(;++u<s;){var p=e[u],y=r?r(p):p;if(p=o||0!==p?p:0,a&&y==y){for(var v=f;v--;)if(t[v]===y)continue e;l.push(p)}else c(t,y,o)||l.push(p)}return l}function D(e){return!(!Q(e)||(t=e,k&&k in t))&&(J(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?T:a).test(function(e){if(null!=e){try{return P.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function N(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function U(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return D(n)?n:void 0}function W(e){return X(e)||function(e){return Y(e)&&j.call(e,"callee")&&(!V.call(e,"callee")||S.call(e)==i)}(e)||!!(E&&e&&e[E])}A.prototype.clear=function(){this.__data__=L?L(null):{}},A.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},A.prototype.get=function(e){var t=this.__data__;if(L){var n=t[e];return n===r?void 0:n}return j.call(t,e)?t[e]:void 0},A.prototype.has=function(e){var t=this.__data__;return L?void 0!==t[e]:j.call(t,e)},A.prototype.set=function(e,t){return this.__data__[e]=L&&void 0===t?r:t,this},I.prototype.clear=function(){this.__data__=[]},I.prototype.delete=function(e){var t=this.__data__,n=z(t,e);return!(n<0)&&(n==t.length-1?t.pop():C.call(t,n,1),!0)},I.prototype.get=function(e){var t=this.__data__,n=z(t,e);return n<0?void 0:t[n][1]},I.prototype.has=function(e){return z(this.__data__,e)>-1},I.prototype.set=function(e,t){var n=this.__data__,r=z(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},q.prototype.clear=function(){this.__data__={hash:new A,map:new(R||I),string:new A}},q.prototype.delete=function(e){return N(this,e).delete(e)},q.prototype.get=function(e){return N(this,e).get(e)},q.prototype.has=function(e){return N(this,e).has(e)},q.prototype.set=function(e,t){return N(this,e).set(e,t),this},B.prototype.add=B.prototype.push=function(e){return this.__data__.set(e,r),this},B.prototype.has=function(e){return this.__data__.has(e)};var $,G,K=($=function(e,t){return Y(e)?M(e,function e(t,n,r,o,i){var u=-1,c=t.length;for(r||(r=W),i||(i=[]);++u<c;){var a=t[u];n>0&&r(a)?n>1?e(a,n-1,r,o,i):y(i,a):o||(i[i.length]=a)}return i}(t,1,Y,!0)):[]},G=F(void 0===G?$.length-1:G,0),function(){for(var e=arguments,t=-1,n=F(e.length-G,0),r=Array(n);++t<n;)r[t]=e[G+t];t=-1;for(var o=Array(G+1);++t<G;)o[t]=e[t];return o[G]=r,p($,this,o)});var X=Array.isArray;function H(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!J(e)}function Y(e){return function(e){return!!e&&"object"==typeof e}(e)&&H(e)}function J(e){var t=Q(e)?S.call(e):"";return t==u||t==c}function Q(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=K}).call(this,n(10))},function(e,t){e.exports=require("xeokit-sdk/src/plugins/NavCubePlugin/NavCubePlugin")},function(e,t){e.exports=require("xeokit-sdk/src/plugins/GLTFLoaderPlugin/GLTFLoaderPlugin")},function(e,t){e.exports=require("xeokit-sdk/src/plugins/XKTLoaderPlugin/XKTLoaderPlugin")},function(e,t,n){"use strict";var r=n(9);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,u){if(u!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),u=n.n(i),c=n(3),a=n(2),s=n(5),l=n(4),f=n.n(l);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){var t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),d(this,y(n).apply(this,arguments))}var i,u,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(n,r["Component"]),i=n,(u=[{key:"componentDidMount",value:function(){var e=this.props,t=e.camera,n=e.bcfViewpoint;this.setUpViewer(),t&&this.setCamera(),this.loadPlugins();var r=this.loadModels();n&&this.setBCFViewpoints(r),this.pickEntity()}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props;if(e.models!==n.models){var r=f()(n.models,e.models),o=f()(e.models,n.models),i=r.map(function(e){return t.modelLoader.load(e)});n.bcfViewpoint&&this.setBCFViewpoints(i),o.forEach(function(e){var n=e.id;t.viewer.scene.models[n].destroy()})}}},{key:"componentWillUnmount",value:function(){this.viewer.destroy()}},{key:"setUpViewer",value:function(){var e=this.props.canvasID;this.viewer=new c.Viewer({canvasId:e})}},{key:"setCamera",value:function(){var e=this.viewer.scene.camera,t=this.props.camera,n=t.eye,r=t.look,o=t.up,i=t.zoom;e.eye=n,e.look=r,e.up=o,e.zoom(i)}},{key:"setBCFViewpoints",value:function(e){var t=this,n=this.props.bcfViewpoint,r=e.map(function(e){return new Promise(function(t){return e.on("loaded",t)})});Promise.all(r).then(function(){return t.BCFViewpointsPlugin.setViewpoint(n)})}},{key:"loadModels",value:function(){var e=this;return this.props.models.map(function(t){return e.modelLoader.load(t)})}},{key:"loadPlugins",value:function(){var t=this.props,n=t.bcfViewpoint,r=t.navCubeSettings;this.modelLoader=new e(this.viewer),n&&(this.BCFViewpointsPlugin=new a.BCFViewpointsPlugin(this.viewer)),r&&new s.NavCubePlugin(this.viewer,r)}},{key:"pickEntity",value:function(){var e=this.props.eventToPickOn,t=null,n=null,r=this.viewer.scene;r.input.on(e,function(e){var o=r.pick({canvasPos:e});o?(console.log(o.entity.id),t&&o.entity.id===t.id||(t&&(t.colorize=n),t=o.entity,n=o.entity.colorize.slice(),o.entity.colorize=[0,1,0])):t&&(t.colorize=n,t=null)})}},{key:"takeScreenshot",value:function(){var e=this.viewer.getSnapshot({format:"png"}),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","model-screenshot"),t.click()}},{key:"render",value:function(){var e=this,t=this.props,n=t.canvasID,r=t.width,i=t.height,u=t.navCubeSettings,c=t.enableScreenshot;return o.a.createElement("div",null,o.a.createElement("canvas",{id:n,width:r,height:i,className:"d-block mx-auto border border-secondary m-3 mw-100"}),u?o.a.createElement("canvas",{id:u.canvasId,width:u.canvasWidth,height:u.canvasHeight,className:"d-block mx-auto mw-100"}):null,c?o.a.createElement("button",{type:"button",id:"take-screenshot",className:"btn btn-primary",onClick:function(){return e.takeScreenshot()}},"Take Screenshot"):null)}}])&&h(i.prototype,u),l&&h(i,l),n}();return t.propTypes={canvasID:u.a.string.isRequired,width:u.a.number,height:u.a.number,camera:u.a.object,models:u.a.arrayOf(u.a.shape({id:u.a.string.isRequired,src:u.a.string.isRequired})).isRequired,bcfViewpoint:u.a.object,eventToPickOn:u.a.string,navCubeSettings:u.a.shape({canvasId:u.a.string.isRequired,canvasWidth:u.a.number,canvasHeight:u.a.number}),enableScreenshot:u.a.bool},t.defaultProps={eventToPickOn:"mouseclicked"},t},m=n(6),_=n(7),g=b(m.GLTFLoaderPlugin),w=b(_.XKTLoaderPlugin),O=function(e,t,n){var r=null,o=null,i=e.scene;i.input.on(t,function(e){var t=i.pick({canvasPos:e});t?(console.log(t.entity.id),n(t.entity.id),r&&t.entity.id===r.id||(r&&(r.colorize=o),r=t.entity,o=t.entity.colorize.slice(),t.entity.colorize=[0,1,0])):r&&(r.colorize=o,r=null)})},k=function(e,t){var n=e.scene.camera;Object.keys(t).forEach(function(e){var r=n[e],o=t[e];"function"==typeof r?r.call(n,o):n[e]=o})};function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.bcfViewpoint,i=n.eventToPickOn,u=void 0===i?"mouseclicked":i,s=n.camera,l=Object(r.useState)(null),f=P(l,2),p=f[0],h=f[1],d=Object(r.useState)(!1),y=P(d,2),v=y[0],b=y[1],m=Object(r.useState)(null),_=P(m,2),g=_[0],w=_[1],j=Object(r.useRef)(),S=Object(r.useRef)(),T=Object(r.useRef)(),x=Object(r.useRef)(),V=Object(r.useMemo)(function(){return{ref:h}},[h]),C=function(){if(j.current){var e=j.current.getSnapshot({format:"png"}),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","model-screenshot"),t.click()}},E=function(e){!x.current&&j.current&&(x.current=new a.BCFViewpointsPlugin(j.current)),T.current&&v&&x.current.setViewpoint(e)};return Object(r.useEffect)(function(){if(p){j.current=new c.Viewer({canvasElement:p}),S.current=new e(j.current),T.current=t.map(function(e){return S.current.load(e)});var n=T.current.map(function(e){return new Promise(function(t){return e.on("loaded",t)})});Promise.all(n).then(function(){return b(!0)}),O(j.current,u,w)}return function(){p&&j.current.destroy()}},[p,e,t,u]),Object(r.useEffect)(function(){o&&v&&(x.current=new a.BCFViewpointsPlugin(j.current),x.current.setViewpoint(o))},[o,v]),Object(r.useEffect)(function(){j.current&&s&&k(j.current,s)},[s,p]),Object(r.useEffect)(function(){!s&&v&&j.current.cameraFlight.flyTo(T.current[0])},[v,s]),{viewerCanvasProps:V,takeScreenshot:C,setBcfViewpoint:E,pickedEntityID:g}};n.d(t,"GLTFViewer",function(){return g}),n.d(t,"XKTViewer",function(){return w}),n.d(t,"useViewer",function(){return j})}]);